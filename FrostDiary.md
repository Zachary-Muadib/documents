# FrostDiary - Product Document

Last Revision: V0.3.2

1. 开发团队
	•	产品经理：Frostnova
	•	项目经理：Frostnova
	•	Swift & SwiftUI 开发：ChatGPT
	•	后端开发：ChatGPT
	•	运维：Frostnova
	•	测试 / 安全：Frostnova
	•	文档：Frostnova, ChatGPT
	•	数据库：ChatGPT
	•	财务：Frostnova
	•	商务：Frostnova
	•	技术支持：Swift Community, GitHub, ChatGPT
	•	美术支持：Alumin-102th.Cycle
	•	金牌赞助商：暮歌控股（中国）集团

2. 产品概述
	•	一句话愿景：记录值得记录的事
	•	使用场景概述：
	•	日常生活记录：心情、事件、灵感、照片等
	•	自我管理：通过标签和轨迹维度，跟踪习惯、情绪、睡眠、运动等
	•	回顾与反思：按时间、主题、轨迹、标签进行复盘和年度回顾
	•	目标用户画像（主 / 次）：TBD
	•	核心产品特点：高度自由的记录方式
	•	核心价值主张（做什么 / 不做什么）：
	•	使用简洁且结构化的方式，支持用户完成高复杂度的自定义记录
	•	不加入任何社交、与日记非强相关的功能
	•	非核心场景通过链接跳转到外部 App（如任务清单、冥想、运动类）
	•	付费用户可使用更高级的自定义能力（例如高级模板、高级统计等）

3. 信息架构（IA）
	•	顶层模块候选：
	•	首页（日记）
	•	照片
	•	日历
	•	回顾
	•	我的
默认导航栏位于底部，用户可在设置中自定义为顶部显示。
	•	特色功能：
	•	轨迹 Trace：用户自定义的多选或单选分类模块，嵌套于日记记录内，可按需启用，用于结构化统计。
	•	全局能力：
	•	快速记录
	•	全局搜索
	•	回顾（系统自动统计汇总与用户自定义统计）
	•	分享 / 导出

4. 关键用户流程（Happy Path）
	•	首次启动：
	•	权限声明（通知、相册、麦克风、定位等）
	•	设定偏好（语言、周起始、默认展示模式、是否启用轨迹 Trace、是否启用地理位置）
	•	选择默认日记模板或跳过
	•	进入首页
	•	自定义：
	•	我的 → 自定义
	•	自定义日记内显示模块及各模块显示程度（标题、简介、正文、格式、轨迹、标签、相册与拍摄、地理位置、录音、心情、运动、睡眠等）
	•	自定义模板：
	•	新建、编辑、删除日记模板
	•	新建日记时选择模板
	•	模板推荐：
	•	提供若干轨迹模板推荐（非中国大陆地区适用范围，具体内容 TBD）
	•	新建：
	•	首页 → 新增 → 进入编辑页
	•	编辑页聚焦内容编辑，复杂配置通过跳转入口处理
	•	编辑完成后：
	•	保存并返回
	•	暂存并离开（保存为草稿）
	•	回顾：
	•	从回顾模块或首页入口进入
	•	选择回顾方式：
	•	按时间：本周、本月、本年、自定义时间段
	•	按维度：轨迹、标签、情绪、地点等
	•	系统生成回顾页面，包含：
	•	记录数量趋势
	•	高频标签 / 轨迹
	•	若干代表性日记（规则 TBD，例如标记为重要、字数较多等）
	•	检索：
	•	首页顶部搜索框
	•	支持：
	•	标题与正文关键字搜索
	•	是否记录历史搜索词
	•	过滤器：标签、情绪、日期范围、是否含图、是否含音频等
	•	结果列表：
	•	默认按时间倒序
	•	可切换为相关性排序（具体算法 TBD）
	•	提醒：
	•	我的 / 设置 → 提醒设置
	•	配置提醒频率（每日、每周、工作日、自定义）与时间
	•	通知点击后跳转到新建日记页或首页
	•	分享 / 导出：
	•	分享入口：
	•	日记详情页
	•	回顾页
	•	统计页
	•	选择导出范围：
	•	单篇日记
	•	某时间段内的全部日记
	•	某筛选结果集
	•	选择导出格式：
	•	图文长图
	•	PDF
	•	纯文本（具体组合 TBD）
	•	预览并选择保存到相册或通过系统分享面板发送

5. 界面设计原则与版式
	•	设计关键词：
	•	简洁
	•	一致
	•	克制
	•	视觉与排版：
	•	使用 SwiftUI 实现
	•	遵循 Human Interface Guidelines
	•	支持浅色 / 深色模式
	•	支持动态字体，跟随系统字体大小设置
	•	布局原则：
	•	首页和编辑页优先展示内容本身
	•	重要操作布局在拇指易触达区域
	•	减少干扰元素，避免过多装饰性组件
	•	状态设计：
	•	空状态：无日记时给出引导创建的提示
	•	加载状态：使用轻量的进度指示或骨架屏
	•	无网络状态：在需要同步或分享时提示，但保证本地编辑正常

6. 详细界面规格（按页面）

6.1 首页
	•	功能定位：
	•	显示日记列表
	•	提供新建入口和搜索入口
	•	列表展示：
	•	顶部展示最新日记，向下按时间倒序排列
	•	支持按时间分组：今日、昨日、近七天、本月、更早（用户可在设置中开启或关闭）
	•	顶部区域：
	•	App 标题或图标
	•	搜索框入口（可点击进入独立搜索页）
	•	右上角区域：
	•	展示模式切换按钮（多种卡片样式之间切换）
	•	可在设置中选择是否显示该按钮
	•	列表展示模式：
	1.	备忘录式卡片
	•	日记以卡片形式纵向叠放
	•	卡片三行预览：
	•	第一行标题（有标题则加粗，没有则显示正文前若干字符）
	•	第二、三行为正文预览
	•	文本超出三行时以省略号收尾
	•	含图片时在右侧显示第一张图片的方形缩略图
	2.	图文模式
	•	上半部分为文本区域，最多五行，超出以省略号收尾
	•	下半部分为图片宫格：
	•	一张图片时显示为横向铺满的大图（高度限制）
	•	多张图片时使用三列布局
	•	超过九张时仅显示前八张，第九个位置以四宫格缩略图表示剩余内容
	3.	顶部大图模式
	•	图片位于卡片顶部
	•	固定高度，宽度等比缩放填充卡片宽度
	•	多张图片时支持横向滑动
	•	图片下方展示最多五行文字内容，超出以省略号收尾
	•	交互行为：
	•	点击卡片进入详情页（只读视图）
	•	左滑卡片可显示删除、归档、标记为重要等操作（可在设置中配置）
	•	下拉刷新进行数据刷新（如后续支持同步）

6.2 新建 / 编辑
	•	入口：
	•	首页新增按钮
	•	通知点击跳转
	•	其他模块跳转（如回顾中的“添加记录”）
	•	编辑区域：
	•	标题输入框（可为空）
	•	正文编辑区域（支持换行和基本列表输入）
	•	可选模块：
	•	图片（拍摄或从相册选取）
	•	轨迹 Trace（选择模板中的条目）
	•	标签（选择或新建）
	•	位置（基于系统定位）
	•	心情（简单枚举或表情）
	•	保存逻辑：
	•	自动保存草稿（用户输入后短暂延时）
	•	点击保存按钮视为正式保存
	•	退出逻辑：
	•	无任何输入直接退出且不保留
	•	有内容则保存为日记或草稿
	•	删除逻辑：
	•	在编辑页可删除日记，删除后进入回收站

6.3 时间轴
	•	功能定位：
	•	提供跨年、跨月的宏观时间视角
	•	展示形式：
	•	按年份分组
	•	年内按月份分段
	•	显示每段时间内记录数量和部分代表性日记标题
	•	交互：
	•	点击月份进入对应月份的日记列表
	•	支持按标签、轨迹过滤后重新渲染时间轴分布

6.4 日历视图（天 / 周 / 月）
	•	视图类型：
	•	月视图
	•	周视图
	•	日视图
	•	月视图：
	•	使用标准网格展示当前月份
	•	有记录日期显示标记点或高亮
	•	点击日期后展示当日记录列表
	•	周视图：
	•	横向展示一周日期
	•	下方展示该周所有日记列表
	•	日视图：
	•	展示某日所有日记，按时间排序

6.5 搜索与筛选
	•	搜索入口：
	•	首页顶部搜索框
	•	独立搜索页
	•	搜索条件：
	•	关键字（标题与正文）
	•	时间范围
	•	标签（多选）
	•	轨迹选项（单选或多选）
	•	内容类型（是否含图片、是否含音频等）
	•	结果展示：
	•	默认按时间倒序
	•	支持切换为按相关性排序（规则 TBD）
	•	支持二次筛选

6.6 标签管理
	•	标签列表：
	•	展示所有标签及其关联的日记数量
	•	支持标签搜索
	•	操作：
	•	新建标签（名称，颜色可选）
	•	编辑标签（名称与颜色）
	•	删除标签（只解除标签与日记的关系，不删除日记）

6.7 统计
	•	统计维度：
	•	时间维度：按日、周、月、年统计记录数量
	•	标签维度：统计各标签使用频次
	•	轨迹维度：统计轨迹选项的使用情况
	•	展示形式：
	•	简化图表（柱状、折线、饼图）
	•	搭配列表展示详细数据

6.8 年度回顾
	•	时间范围：
	•	默认当前自然年，可切换到往年
	•	回顾内容：
	•	年度总记录天数与总记录数
	•	最活跃月份与活跃时段
	•	高频标签与轨迹选项
	•	若干年度代表性日记（规则 TBD）

6.9 设置（选项逻辑）
	•	外观与显示：
	•	深色 / 浅色 / 跟随系统
	•	首页展示模式默认值
	•	时间分组标题开关（如是否显示“今日”等）
	•	记录与编辑：
	•	默认日记模板
	•	是否自动添加位置
	•	是否启用自动保存草稿
	•	提醒：
	•	提醒频率与提醒时间
	•	工作日模式开关
	•	隐私：
	•	App 启动验证（面容、指纹或密码）
	•	是否在多任务界面模糊处理内容预览
	•	数据与备份：
	•	数据导出入口
	•	数据重置入口（清空本地数据，带确认）

6.10 回收站 / 归档（逻辑）
	•	回收站：
	•	删除日记进入回收站
	•	可在回收站恢复或彻底删除
	•	自动清理策略：超过设定天数（例如 30 天）自动彻底删除
	•	归档：
	•	用于长期保留但不常查看的日记
	•	归档日记不在首页普通列表中显示，但可在归档视图及搜索、统计中被访问

7. 规则与策略
	•	删除策略：
	•	普通删除移动至回收站
	•	彻底删除不可恢复
	•	自动清理策略：
	•	回收站内超过设定期限的日记自动清理
	•	隐私默认策略：
	•	默认不启用任何社交分享引导
	•	不采集用于广告的行为数据

8. 本地化与无障碍
	•	多语言范围：
	•	简体中文
	•	英文
	•	区域化：
	•	日期格式按系统区域自动切换
	•	周起始日可配置为周一或周日
	•	节假日显示逻辑预留
	•	可访问性：
	•	支持系统字体缩放
	•	保证前景与背景对比度
	•	为关键控件提供 VoiceOver 标签
	•	提示文案尽量简洁，不仅依赖颜色区分状态

9. 指标与成功标准（体验层）
	•	首次记录完成率与用时：
	•	用户首次打开 App 至完成第一篇记录的转化率与平均耗时
	•	日均记录完成率与连续记录天数：
	•	活跃用户每天是否有记录
	•	连续记录天数的平均值与最大值
	•	搜索成功率：
	•	搜索后是否有点击进入详情的行为
	•	复盘转化率：
	•	从收到提醒到打开 App 再到完成记录或查看记录的转化比例

10. 路线图（只列逻辑，不承诺实现）
	•	v1.0：
	•	核心记录功能（新建、编辑、删除、图片）
	•	标签与基础标签管理
	•	搜索（关键字 + 基础筛选）
	•	日历视图（月视图）
	•	基础统计（记录数量与简单趋势）
	•	提醒（固定频率）
	•	回收站
	•	v1.x 后续方向：
	•	更丰富的统计维度和图表
	•	更灵活的回顾与年度总结
	•	多设备同步与备份方案

11. 功能需求列表与优先级（v1.0）
	•	P0（必须实现）：
	•	日记记录：新建、编辑、删除、展示
	•	文本内容：标题与正文输入
	•	图片插入与缩略图展示
	•	基础标签系统：添加、删除、按标签筛选
	•	基础日历视图：按日期查看日记
	•	搜索：按标题与正文关键字搜索
	•	提醒：每日或每周提醒，通知可跳转
	•	回收站：删除可恢复，支持彻底删除
	•	P1（重要）：
	•	首页展示模式切换
	•	时间分组展示（今日、昨日等）
	•	轨迹 Trace 基础功能
	•	统计页基础图表
	•	年度回顾基础版本
	•	分享 / 导出图文长图
	•	P2（后续版本）：
	•	复杂筛选条件（多条件组合）
	•	时间轴视图
	•	按标签或轨迹的高级提醒策略
	•	更多模板推荐与区域差异化配置

12. 非功能需求（NFR）
	•	性能：
	•	打开 App 至首页内容可见时间在合理范围内（具体指标后续确定）
	•	在记录数量较多（如数千篇）时仍保持基本流畅
	•	稳定性：
	•	编辑过程中的异常退出不应导致内容丢失
	•	主要场景下避免崩溃
	•	隐私与安全：
	•	数据默认存储在本地或用户授权的云端空间
	•	支持启动时验证（面容、指纹或密码）
	•	支持多任务界面模糊内容预览
	•	数据持久化与备份：
	•	支持系统级备份与恢复
	•	预留后续导出 / 导入机制
	•	兼容性：
	•	支持当前主流 iOS 版本（最低版本后续确定）
	•	可维护性：
	•	模块化设计，代码结构清晰，方便迭代与扩展

13. 数据结构与存储策略（概览）
	•	日记 Entry：
	•	示例字段：
	•	id
	•	createdAt
	•	updatedAt
	•	title
	•	content
	•	isArchived
	•	isDeleted
	•	tags（标签 id 列表）
	•	traceOptions（轨迹选项 id 列表）
	•	mediaItems（媒体 id 列表）
	•	location（位置对象或坐标）
	•	mood（心情枚举）
	•	标签 Tag：
	•	示例字段：
	•	id
	•	name
	•	color
	•	sortOrder
	•	轨迹 Trace：
	•	模板字段：
	•	id
	•	name
	•	type（单选或多选）
	•	options（选项列表，包含 option id 与名称）
	•	用户在日记中的选择：
	•	traceOptionIds（与日记关联的选项 id 列表）
	•	媒体 Media：
	•	示例字段：
	•	id
	•	entryId
	•	type（图片、音频等）
	•	pathOrIdentifier（本地路径或系统标识符）
	•	提醒 Reminder：
	•	示例字段：
	•	id
	•	type（每日、每周、自定义）
	•	timeOfDay
	•	active

说明：上述为概念级设计，具体实现细节将在技术设计文档中补充。

14. 竞品与差异化要点（概览）
	•	竞品类型：
	•	纯文本日记 App
	•	图文 / 情绪记录 App
	•	综合效率工具（待办 + 日记 + 习惯）
	•	FrostDiary 的差异化：
	•	私密、无社交功能
	•	强结构化，通过标签、轨迹、时间、地点等维度组织内容
	•	高自由度自定义模板和展示模式
	•	功能边界清晰，将非核心场景交由其他专业 App，通过链接打通
