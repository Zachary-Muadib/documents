# FrostDiary - Product Document

Last Revision: V0.3.0

⸻

1. 开发团队
	•	产品经理：Frostnova
	•	项目经理：Frostnova
	•	Swift & SwiftUI 开发：ChatGPT
	•	后端开发：ChatGPT
	•	运维：Frostnova
	•	测试 / 安全：Frostnova
	•	文档：Frostnova, ChatGPT
	•	数据库：ChatGPT
	•	财务：Frostnova
	•	商务：Frostnova
	•	技术支持：Swift Community, GitHub, ChatGPT
	•	美术支持：Alumin-102th.Cycle
	•	金牌赞助商：暮歌控股（中国）集团

⸻

2. 产品概述
	•	一句话愿景：记录值得记录的事
	•	使用场景概述：
	•	日常生活记录：心情、事件、灵感、照片等
	•	自我管理：通过标签和轨迹维度，跟踪习惯、情绪、睡眠、运动等
	•	回顾与反思：按时间、主题、轨迹、标签进行复盘和年度回顾
	•	目标用户画像（主 / 次）：TBD
	•	核心产品特点：
	•	高度自由的记录方式
	•	强结构化但保持编辑体验简洁
	•	不做社交、边界清晰
	•	核心价值主张（做什么 / 不做什么）：
	•	使用简洁且结构化的方式，支持用户完成高复杂度的自定义记录
	•	不加入任何社交、与日记非强相关的功能
	•	与任务清单、冥想、运动等非核心场景相关的功能，通过链接跳转到其他 App（如清单类软件、潮汐冥想、Keep 等）
	•	针对付费用户提供更强大、更复杂的高自由度自定义能力（如高级模板、高级统计等）

⸻

3. 信息架构（IA）
	•	顶层模块候选：
	•	首页（日记）
	•	照片
	•	日历
	•	回顾
	•	我的
默认顶层模块在页面最下方显示导航，用户可在设置中自定义为顶部显示。
	•	特色功能：
	•	轨迹 Trace：用户自定义的多选或单选分类模块，嵌套于日记记录内，按需启用，用于支持高维度的结构化统计。
	•	全局能力：
	•	快速记录：从系统组件或 App 内任意页面快速进入记录入口
	•	全局搜索：支持按关键字与多维度过滤的搜索
	•	回顾：
	•	系统自动统计与聚合汇总（汇总方式 TBD）
	•	用户自定义查看与筛选（按轨迹、标签、地理位置、记录时间等）
	•	分享 / 导出：按条目或时间段导出为图文等形式

⸻

4. 关键用户流程（Happy Path）
	•	首次启动：
权限声明（通知、相册、麦克风、定位等）
→ 设定偏好（语言、周起始、默认展示模式、是否启用轨迹 Trace、是否启用地理位置）
→ 选择默认日记模板或跳过
→ 进入首页
	•	自定义：
我的 → 自定义
	•	自定义日记内显示模块及各模块显示的详细程度：
标题、简介、正文、格式、轨迹、标签、相册与拍摄、地理位置、录音、心情、运动、睡眠等
	•	自定义模板：
	•	新建、编辑、删除日记模板
	•	在新建日记时选择模板
	•	模板推荐：
	•	提供若干推荐的轨迹模板（非中国大陆地区版本适用范围，具体内容 TBD）
	•	新建：
首页 → 新增 → 进入编辑页
	•	编辑页聚焦于内容编辑，复杂的模块配置和模板编辑不在单篇日记编辑中直接展开，仅通过入口跳转
	•	编辑完成后，用户可以：
	•	保存并返回（默认操作）
	•	暂存并离开（自动保存为草稿）
	•	回顾：
回顾模块 / 首页入口 → 选择回顾方式：
	•	按时间：本周、本月、本年、自定义时间段
	•	按维度：轨迹、标签、情绪、地点等
系统生成基础回顾页面，展示：
	•	记录数量趋势
	•	高频标签 / 轨迹
	•	若干代表性日记（如按阅读次数、标记为重要等逻辑）
	•	检索：
首页 → 顶部搜索框
	•	支持输入关键字搜索标题和正文
	•	可开关历史搜索词记录
	•	过滤器：标签、情绪、日期范围、是否含图、是否含音频等
	•	搜索结果以列表展示，支持按时间排序或相关性排序
	•	提醒：
我的 / 设置 → 提醒设置
	•	选择提醒频率：每日、每周、工作日、自定义
	•	选择提醒时间段：具体时刻（如 21:00）
	•	收到通知后，点击跳转到：
	•	新建日记页，或
	•	首页（可快速创建）
	•	分享 / 导出（逻辑）：
入口：日记详情页 / 回顾页 / 统计页
	•	选择导出范围：单篇日记、某时间段所有日记、筛选结果集
	•	选择格式：图文长图、PDF 或纯文本（具体格式组合 TBD）
	•	生成预览页面（可编辑部分展示项，如是否包含日期、地点、轨迹、标签等）
	•	确认后保存至相册或通过系统分享面板发送

⸻

5. 界面设计原则与版式
	•	设计语言关键词：简洁、克制、一致
	•	视觉与排版：
	•	采用 SwiftUI 实现
	•	遵循系统 Human Interface Guidelines 的基础规范
	•	支持深色 / 浅色模式
	•	主要文字字号支持动态字体，跟随系统字体大小设置
	•	布局原则：
	•	首页和编辑页优先展示内容本身，减少干扰元素
	•	重要操作使用底部或右上角的高可见性按钮位置
	•	保证拇指可达区域内的主要交互控件布局
	•	状态设计（概览）：
	•	空状态：无日记时提供友好提示和引导创建第一篇记录
	•	加载状态：使用轻量的进度指示或骨架屏
	•	无网络状态：在需要同步或分享时提示，但保证本地正常使用
	•	基础组件清单：TBD（列表、卡片、标签组件、过滤器组件、统计卡片等）

⸻

6. 详细界面规格（按页面）

6.1 首页
	•	功能定位：
展示日记列表、支持新建入口和基础搜索，是用户打开 App 后的核心落地页面。
	•	列表展示：
	•	最上方为最新日记，向下按日期倒序排列
	•	支持按时间分段显示分组标题：今日、昨日、近七天、本月、更早等（用户可在设置中开启或关闭时间分组）
	•	顶部区域：
	•	App 标题或图标
	•	搜索框入口（点击进入搜索页或在顶部展开搜索）
	•	右上角：
	•	显示模式切换按钮（多种卡片样式之间切换）
	•	入口可在设置中开关
	•	列表展示模式：
1）类似 iOS 备忘录的卡片形式
	•	日记以卡片形式从上往下叠放
	•	卡片高度为三行文本：
	•	第 1 行为标题，若有标题则加粗显示；无标题则显示正文前若干字符
	•	第 2、3 行为正文内容预览
	•	正文超出时在第 3 行末尾显示省略号
	•	若日记含图片，则在卡片右侧显示第一张图片的正方形缩略图
2）类似朋友圈的图文形式
	•	上半区域为文字内容，自适应高度但不超过 5 行；溢出时在第 5 行末尾显示省略号
	•	下半区域为宫格图片：
	•	1 张图片时显示为横向填充的大图，限制最大高度
	•	多张图片时使用 3 列宫格布局
	•	不足三行时只显示实际行数
	•	超过 9 张时仅显示 8 张，第 9 个宫格以四宫格缩略图形式展示剩余情况
3）顶部大图加文字形式
	•	以图片为视觉主元素，图片位于卡片顶部
	•	图片高度固定，宽度等比缩放填满卡片宽度
	•	图片以横向滚动缩略图的形式展示多张图片，可滑动查看
	•	图片下方展示最多 5 行文字内容，溢出时在第 5 行末尾显示省略号
	•	交互行为：
	•	点击卡片进入详情页（只读视图）
	•	左滑卡片出现操作：删除、归档、标记为重要（具体操作可在设置中配置）
	•	下拉刷新：刷新数据（若涉及同步场景则触发同步）

6.2 新建 / 编辑
	•	入口：
	•	首页底部悬浮按钮或导航栏按钮
	•	系统通知点击后跳转
	•	编辑区域：
	•	标题输入框（可为空）
	•	正文编辑区域，支持基础格式如换行、列表符号输入等（不做复杂富文本工具栏）
	•	可选模块：
	•	图片添加（拍摄和从相册选择）
	•	轨迹 Trace 选项选择
	•	标签选择 / 新建标签
	•	位置获取
	•	心情选择（如表情 / 简单枚举）
	•	保存逻辑：
	•	实时自动保存（用户输入后短暂延时自动本地保存草稿）
	•	用户手动点击保存按钮时标记为正式版本
	•	退出逻辑：
	•	若完全未输入任何内容，直接退出且不保留卡片
	•	若已有任何内容，则保留为已保存日记或草稿
	•	删除逻辑：
	•	在编辑页中可删除当前日记，删除后移动至回收站

6.3 时间轴
	•	功能定位：
提供跨年、跨月的宏观时间视角，便于快速浏览记录密度和重要事件。
	•	展示形式：
	•	按年份分组，年内按月份分段展示
	•	每一段时间显示：
	•	该段的记录数量
	•	若干代表性日记标题或摘要
	•	交互：
	•	点击月份段落进入该月的日记列表
	•	支持按轨迹或标签过滤，过滤后时间轴只展示包含对应条件的记录分布

6.4 日历视图（天 / 周 / 月）
	•	视图切换：
	•	默认进入月视图，可在顶部切换到周视图或日视图
	•	月视图：
	•	使用标准日历网格显示当前月份
	•	有记录的日期显示高亮或标记点
	•	点击具体日期，在下方或侧边显示该日期的日记列表
	•	周视图：
	•	以一周为单位横向展示日期
	•	下方展示该周内所有日记的列表
	•	日视图：
	•	聚焦某一天，展示该日所有日记，按时间排序

6.5 搜索与筛选
	•	搜索入口：
	•	首页顶部搜索栏
	•	独立搜索页（点击搜索栏进入）
	•	搜索条件：
	•	关键字：匹配标题与正文
	•	时间：可选日期范围
	•	标签：多选
	•	轨迹：多选或单选
	•	是否含图片、是否含音频等内容类型条件
	•	结果页：
	•	默认按时间倒序展示
	•	可切换排序模式为相关性（按匹配程度排序，具体算法 TBD）
	•	支持在结果列表中进一步进行二次筛选

6.6 标签管理
	•	标签列表页：
	•	展示所有已创建标签及其对应的日记数量
	•	支持搜索标签
	•	标签操作：
	•	新建标签：输入名称，可选颜色
	•	编辑标签：修改名称和颜色
	•	删除标签：删除后，仅移除标签与日记的关系，日记内容不删除

6.7 统计
	•	统计维度：
	•	时间维度：按日、周、月、年统计记录数量
	•	标签维度：统计各标签的使用频次
	•	轨迹维度：统计轨迹选项应用次数和比例
	•	展示形式：
	•	简化图表（柱状、折线、饼图，具体样式 TBD）
	•	搭配列表形式展示详细数据

6.8 年度回顾
	•	时间范围：
	•	默认当前自然年，可切换查看往年
	•	回顾内容：
	•	年度总记录天数与总记录数
	•	最活跃月份与最活跃时段
	•	高频标签 / 轨迹选项
	•	若干年度代表日记（由系统基于简单规则筛选，如被标记为重要、记录长度较长等）

6.9 设置（仅选项逻辑）
	•	外观与显示：
	•	深色 / 浅色 / 跟随系统
	•	首页展示模式默认值
	•	时间分组显示开关（如是否展示今日、昨日等分组标题）
	•	记录与编辑：
	•	新建日记时默认模板
	•	是否自动添加当前位置
	•	是否在编辑时实时自动保存草稿
	•	提醒：
	•	提醒频率和时间
	•	提醒是否支持工作日模式
	•	隐私：
	•	是否启用 App 启动锁定（使用系统面容 ID / 指纹 / 密码）
	•	是否在系统多任务界面遮挡内容预览
	•	数据与备份：
	•	数据导出入口
	•	数据重置入口（清空所有本地数据，带确认提示）

6.10 回收站 / 归档（逻辑）
	•	回收站：
	•	删除日记默认进入回收站
	•	支持从回收站恢复或彻底删除
	•	回收站内容可设置自动清理周期（如 30 天后自动彻底删除）
	•	归档：
	•	归档操作用于“完成但不常查看”的日记
	•	归档日记从首页普通列表中隐藏，只在归档视图或通过搜索、统计中可见

⸻

7. 规则与策略
	•	删除策略：
	•	普通删除：移动至回收站
	•	彻底删除：在回收站中执行，不可恢复
	•	自动清理策略：
	•	回收站内超过设定时间的日记自动彻底删除（默认 30 天，可在设置中调整或关闭）
	•	冲突与版本策略（预留）：
	•	若后续支持多设备同步，将引入基于时间戳的简单版本合并策略（具体实现暂不展开）
	•	隐私默认策略：
	•	默认不开启社交分享引导，分享操作只在用户主动选择时出现
	•	不主动采集用于广告推荐的行为数据

⸻

8. 本地化与无障碍
	•	多语言范围：
	•	中文（简体）
	•	英文
	•	其他语言后续评估
	•	区域化：
	•	日期格式：按系统区域自动切换（如 yyyy-MM-dd、MM/dd/yyyy 等）
	•	周起始日：支持以周一或周日作为一周的起始，在设置中可更改
	•	节假日显示：后续可根据区域配置，在日历视图中显示主要节假日（逻辑 TBD）
	•	可访问性：
	•	支持系统字体缩放（动态字体）
	•	保证前景和背景之间有足够的对比度
	•	为关键控件和图标提供 VoiceOver 可读标签
	•	提示文案简洁清晰，避免仅依赖颜色传达状态

⸻

9. 指标与成功标准（体验层）
	•	关键体验指标（不含埋点实现方式）：
	•	首次记录完成率与用时
	•	指用户首次打开 App 至完成第一篇日记的转化率与平均时长
	•	日均记录完成率 / 连续记录天数
	•	活跃用户每天是否有记录
	•	连续记录的最长天数和平均天数
	•	搜索成功率
	•	用户发起搜索后，是否在结果中点击进入详情
	•	复盘转化率
	•	从提醒触达，到打开 App，再到完成一篇记录或查看既有记录的转化比例

⸻

10. 路线图（只列逻辑，不承诺实现）
	•	v1.0：
	•	核心记录：新建、编辑、删除、图片插入
	•	标签与基础标签管理
	•	搜索（关键字 + 基础筛选）
	•	日历视图（基本的月视图）
	•	基础统计（记录数量与简单趋势）
	•	提醒（固定频率提醒）
	•	v1.x 后续方向（示例）：
	•	更丰富的统计维度和图表
	•	更灵活的回顾与年度总结
	•	多设备间同步与备份方案

⸻

11. 功能需求列表与优先级（v1.0）
	•	P0（必须实现）：
	•	日记记录：新建、编辑、删除、展示
	•	文本内容：标题与正文输入
	•	图片插入和列表缩略图展示
	•	基础标签系统：添加、删除、按标签筛选
	•	基础日历视图：支持按日期查看日记列表
	•	搜索：按关键字搜索标题和正文
	•	提醒：每日或每周提醒，通知可跳转到 App
	•	回收站：删除日记可恢复、支持彻底删除
	•	P1（重要）：
	•	首页展示模式切换
	•	时间分组展示（今日、昨日等）
	•	轨迹 Trace 基础功能（模板定义与选择）
	•	统计页基础图表
	•	年度回顾基础版本
	•	分享 / 导出图文长图
	•	P2（可选 / 后续版本）：
	•	更复杂的筛选条件（轨迹、多重组合过滤）
	•	时间轴视图
	•	高级提醒策略（按标签或轨迹）
	•	更丰富的模板推荐

⸻

12. 非功能需求（NFR）
	•	性能：
	•	打开 App 至首页首屏内容可见的时间保持在合理范围（具体数值可在后续测试后设定）
	•	对中等数量数据（数千篇日记）保持基本流畅的滚动体验
	•	稳定性：
	•	界面切换和内容保存过程中避免崩溃
	•	编辑过程中的异常退出不应导致内容丢失
	•	隐私与安全：
	•	数据默认仅存储在本地或用户授权的云端空间（如系统级备份）
	•	支持启动时二次验证（如面容 ID、指纹或密码）
	•	在多任务切换界面可选择模糊处理内容预览
	•	数据持久化与备份：
	•	支持系统备份与恢复
	•	后续评估是否支持额外的导出与导入机制
	•	兼容性：
	•	优先支持当前主流 iOS 版本，具体最低版本要求在技术实现前确认
	•	可维护性：
	•	按模块组织代码与功能，保持清晰边界，便于迭代和单模块替换

⸻

13. 数据结构与存储策略（概览）
	•	日记 Entry：
	•	字段示例：
	•	id
	•	createdAt
	•	updatedAt
	•	title
	•	content
	•	isArchived
	•	isDeleted
	•	关联：
	•	tags：标签 id 列表
	•	traceOptions：轨迹选项 id 列表
	•	mediaItems：媒体 id 列表
	•	location：位置对象或坐标
	•	mood：心情枚举值
	•	标签 Tag：
	•	字段示例：
	•	id
	•	name
	•	color
	•	sortOrder
	•	轨迹 Trace：
	•	模板：
	•	id
	•	name
	•	type（单选或多选）
	•	options（选项列表，每个选项包含 id 和名称）
	•	用户在日记中的选择：
	•	traceOptionIds（与日记关联）
	•	媒体 Media：
	•	字段示例：
	•	id
	•	entryId
	•	type（图片、音频等）
	•	pathOrIdentifier（本地路径或系统资源标识）
	•	提醒 Reminder：
	•	字段示例：
	•	id
	•	type（每日、每周、自定义）
	•	timeOfDay
	•	active

说明：上述为概念级字段示例，具体实现和数据库设计将在技术设计文档中进一步细化。

⸻

14. 竞品与差异化要点（概览）
	•	竞品类型：
	•	纯文本日记 App
	•	图文记录和情绪记录类 App
	•	综合效率工具（待办 + 日记 + 习惯）
	•	FrostDiary 的差异化：
	•	不做社交功能：不引入点赞、评论、关注等机制，聚焦于私人记录与回顾
	•	强结构化：通过标签、轨迹、时间、地点等维度，让内容更易整理与统计
	•	高自由度自定义：支持用户深度定制记录模板和展示模式
	•	功能边界清晰：将非核心场景交由其他专业 App，通过链接打通，而不是全部堆叠在一个产品中

⸻
